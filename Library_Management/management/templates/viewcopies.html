{% extends "base.html" %}
{% load staticfiles %}
{% block title %}My Account{% endblock %}

{% block content %}

<div class="container">
    <div class="row">
        <div class="col-md-9 col-md-offset-1">
        <h3>《{{ book.name }}》所有单册状态</h3>
        </div>
        <div class="col-md-9 col-md-offset-1">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>单册状态</th>
                        <th>应还日期</th>
                        <th>分馆</th>
                        <th>架位</th>
                        <th>请求数</th>
                        <th>条码</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for bookcopy,duedate,request,sta in copy_due_req_status %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>
                            {% ifequal bookcopy.status 'borrowed' %}
                                已借出
                            {% endifequal %}
                            {% ifequal bookcopy.status 'available' %}
                                外借本
                            {% endifequal %}
                        </td>
                        <td>
                            {% ifequal bookcopy.status 'borrowed' %}
                                {{ duedate|date:"Y-m-d" }}
                            {% endifequal %}
                            {% ifequal bookcopy.status 'available' %}
                                 在架上
                            {% endifequal %}
                        </td>
                        <td>
                            {{ bookcopy.collection_loc}}
                        </td>
                        <td>{{ bookcopy.book.call_number }}</td>
                        <td>{{ request }}</td>
                        <td>{{ bookcopy.barcode }}</td>
                        <td>
                            <div class="col-md-1">
                                {% ifequal sta "others_borrow"%}
                                    <p><a class="btn btn-primary" href="/addreservation/?id={{ bookcopy.copy_id }}" role="button">预约&raquo;</a></p>
                                {% endifequal %}
                                {% ifequal sta "others_reserved"%}
                                    <p><a class="btn btn-primary" href="/addreservation/?id={{ bookcopy.copy_id }}" role="button">预约&raquo;</a></p>
                                {% endifequal %}
                                {% ifequal sta "onboard" %}
                                    <p><a class="btn btn-primary" href="/viewcopies/?id={{ bookcopy.id }}" role="button">借书</a></p>
                                {% endifequal %}
                                {% ifequal sta "my_borrow" %}
                                    <p><a class="btn btn-primary" href="/viewcopies/?id={{ bookcopy.id }}" role="button">还书</a></p>
                                {% endifequal %}
                                {% ifequal sta "my_reserved" %}
                                    <p><a class="btn" href="#" role="button">已预约</a></p>
                                {% endifequal %}
                            </div>

                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td>没有单册</td>
                    </tr>
                    {% endfor %}
                </tbody>
             </table>
            </div>
    </div>
</div>

{% endblock %}
